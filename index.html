<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚ãŸã™ã¦ - WATASUTE</title>
    <style>
        /* --- å…¨ä½“ã®ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š --- */
        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fcf0f5;
            background-image: url('assets/bg_pattern.png'); /* èƒŒæ™¯ãƒ‘ã‚¿ãƒ¼ãƒ³ */
            background-size: 100px; /* ãƒ‘ã‚¿ãƒ¼ãƒ³ã®å¤§ãã• */
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        img {
    max-width: 100%;
    height: auto;
}

        /* ã‚³ãƒ³ãƒ†ãƒŠï¼ˆã‚¹ãƒãƒ›ç”»é¢ã®å¹…ã«åˆã‚ã›ã‚‹ï¼‰ */
        .container {
            width: 100%;
            max-width: 480px; /* ã‚¹ãƒãƒ›æƒ³å®šã®æœ€å¤§å¹… */
            background: rgba(255, 255, 255, 0.95);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            margin: 0 auto; /* ã“ã‚Œã§ç”»é¢ã®ä¸­å¤®ã«æ¥ã¾ã™ï¼ */
        }

        /* --- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¨ãƒªã‚¢ --- */
        header {
            width: 100%;
            padding: 15px 0;
            text-align: center;
            position: relative;
        }
        .logo {
            width: 180px; /* ãƒ­ã‚´ã‚µã‚¤ã‚º */
        }
        .menu-icon {
            position: absolute;
            left: 20px;
            top: 20px;
            width: 30px;
            cursor: pointer;
        }

     /* ãƒ¡ã‚¤ãƒ³ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ« */
        .main-visual {
            width: 100%;
            height: auto; /* ã“ã“ãŒ auto ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèªï¼ */
            object-fit: contain; /* ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹ã¨æ¯”ç‡ãŒä¿ãŸã‚Œã¾ã™ */
            margin-bottom: 20px;
        }
        /* ãƒœã‚¿ãƒ³é¡ï¼ˆãƒ˜ãƒ«ãƒ—ãªã©ï¼‰ */
        .header-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        .header-btn {
            width: 140px; /* ã‚ãŸã™ã¦ã¨ã¯ï¼Ÿãƒœã‚¿ãƒ³ãªã© */
            cursor: pointer;
        }

        /* ãŠçŸ¥ã‚‰ã›ãƒãƒ¼ã‚­ãƒ¼ */
        .news-ticker {
            width: 95%;
            height: 40px;
            background-image: url('assets/bg_news.png');
            background-size: cover;
            display: flex;
            align-items: center;
            overflow: hidden;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #333;
            white-space: nowrap;
        }
        .news-content {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 15s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }

        /* --- ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ --- */
        .start-area {
            text-align: center;
            margin-bottom: 30px;
        }
        .section-title {
            width: 200px;
            margin-bottom: 10px;
        }
        .btn-start {
            width: 280px;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .btn-start:active { transform: scale(0.95); }

        /* --- ãŠã™ã™ã‚ã‚³ãƒ¼ãƒ‡ï¼ˆã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼é¢¨ï¼‰ --- */
        .slider-area {
            width: 90%;
            background: #d0f0f0; /* è–„ã„æ°´è‰² */
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        .slider-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
       .slider-content {
            display: flex;
            justify-content: flex-start; /* â† center ã‹ã‚‰ flex-start ã«å¤‰æ›´ */
            gap: 10px;
            overflow-x: auto;
            
            /* â†“â†“â†“ ã“ã‚Œã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼ â†“â†“â†“ */
            width: 100%; /* è¦ªè¦ç´ ã®å¹…ã„ã£ã±ã„ã«åˆ¶é™ã™ã‚‹ */
            padding-bottom: 10px; /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ç”¨ã®éš™é–“ */
        }
        .thumb-img {
            width: 80px;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
            border: 2px solid white;
            background: white;
        }
        .arrow-icon {
            width: 20px;
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.5;
        }

        /* --- ã‚ªã‚¹ã‚¹ãƒ¡ã‚¢ã‚¤ãƒ†ãƒ ä¸€è¦§ --- */
        .recommend-area {
            width: 90%;
            background: #d0f0f0;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
        }
        .item-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        .item-box {
            background: white;
            border-radius: 8px;
            padding: 5px;
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .item-box img {
            width: 100%;
            height: auto;
        }

        /* --- SNSãƒªãƒ³ã‚¯ --- */
        .sns-area {
            text-align: center;
            margin-bottom: 40px;
        }
        .sns-title {
            font-family: 'Arial Black', sans-serif;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
        .sns-icons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .sns-icon {
            width: 50px;
            cursor: pointer;
        }

        /* --- ãƒ•ãƒƒã‚¿ãƒ¼ --- */
        footer {
            width: 100%;
            background: #d0f0f0;
            padding: 30px 0;
            text-align: center;
            font-size: 0.8rem;
        }
        .footer-logo {
            font-family: 'Arial Black', sans-serif;
            font-size: 1.5rem;
            color: #ff8fab;
            margin-bottom: 20px;
            text-shadow: 2px 2px 0 white;
        }
        .footer-links {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            text-align: left;
            width: 80%;
            margin: 0 auto 30px auto;
        }
        .footer-link {
            color: #555;
            text-decoration: none;
            padding: 5px;
        }
        .banner-creator {
            width: 90%;
            max-width: 300px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        /* =========================================
           ç€ã›æ›¿ãˆç”»é¢ï¼ˆæœ€åˆã¯éš ã—ã¦ãŠãï¼‰
           ========================================= */
        #maker-screen {
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
            width: 100%;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
        }

        #avatar-display {
            width: 320px;
            height: 320px;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
            /* èƒŒæ™¯ã®å¸‚æ¾æ¨¡æ§˜ */
            background-image: linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%, #eee), 
                              linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%, #eee);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }

        /* ç”»åƒãƒ¬ã‚¤ãƒ¤ãƒ¼ */
        .avatar-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            pointer-events: none;
        }
        /* é‡ã­é † */
        #layer-background { z-index: 5; }
        #layer-hair-back  { z-index: 10; }
        #layer-body       { z-index: 20; }
        #layer-eyes       { z-index: 30; }
        #layer-mouth      { z-index: 35; }
        #layer-outfit     { z-index: 40; }
        #layer-hair-front { z-index: 50; }
        #layer-accessory  { z-index: 60; }
        #layer-frame      { z-index: 100; }

        /* æ“ä½œãƒ‘ãƒãƒ« */
        #controls {
            width: 95%;
            background: white;
            padding: 15px;
            border-radius: 20px 20px 0 0;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            flex-grow: 1; /* ä¸‹ã¾ã§ä¼¸ã°ã™ */
        }

        /* ã‚¿ãƒ–ãƒœã‚¿ãƒ³ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            overflow-x: auto;
            white-space: nowrap;
            padding-bottom: 5px;
        }
        .tab-btn {
            background: #f0f0f0;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: #888;
            cursor: pointer;
            font-size: 0.9rem;
        }
        .tab-btn.active {
            background: #ff8fab;
            color: white;
        }

        /* ã‚¢ã‚¤ãƒ†ãƒ ä¸€è¦§ */
        .item-list {
            display: none;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            padding-bottom: 50px;
        }
        .item-list.active {
            display: grid;
        }

        .item-btn {
            aspect-ratio: 1;
            background-color: #f9f9f9;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            flex-direction: column;
            text-align: center;
            padding: 5px;
        }
        .item-btn:hover, .item-btn:active {
            border-color: #ff8fab;
            background-color: #fff0f5;
        }

        /* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ç¾¤ï¼ˆä¿å­˜ãƒ»ãƒªã‚»ãƒƒãƒˆï¼‰ */
        .action-buttons {
            display: flex;
            justify-content: space-between;
            width: 320px;
            margin-bottom: 10px;
        }
        .btn-action {
            background: #eee;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            color: #555;
        }
        .btn-save {
            background: #ff8fab;
            color: white;
            font-weight: bold;
            padding: 8px 30px;
        }

    </style>
</head>
<body>

<div class="container">

    <div id="home-screen">
        <header>
            <img src="assets/icon_menu.png" class="menu-icon" alt="Menu">
            <img src="assets/logo.png" class="logo" alt="WATASUTE">
        </header>

        <img src="assets/main_visual.png" class="main-visual" alt="Main Visual">

        <div class="header-buttons">
            <img src="assets/btn_Q.png" class="header-btn" alt="About">
            <img src="assets/btn_Howto.png" class="header-btn" alt="How to">
        </div>

        <div class="news-ticker">
            <div class="news-content">
                ğŸ‰ ã‚ãŸã™ã¦æ­£å¼ã‚ªãƒ¼ãƒ—ãƒ³ï¼ ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼å‹Ÿé›†ä¸­ï¼ æ–°ç€ã‚¢ã‚¤ãƒ†ãƒ ç¶šã€…è¿½åŠ äºˆå®šï¼
            </div>
        </div>

        <div class="start-area">
            <div style="font-weight:bold; font-size:1.2rem; margin-bottom:5px;">è‡ªåˆ†ã®ç€ã›æ›¿ãˆ</div>
            <img src="assets/btn_start.png" class="btn-start" alt="Start" onclick="goToMaker()">
        </div>

        <div class="slider-area">
            <div class="slider-title">æœ¬æ—¥ã®ãŠã™ã™ã‚ã‚³ãƒ¼ãƒ‡</div>
            <div class="slider-content">
                <img src="assets/thumb_rec_1.png" class="thumb-img">
                <img src="assets/thumb_rec_2.png" class="thumb-img">
                <img src="assets/thumb_rec_3.png" class="thumb-img">
            </div>
            <img src="assets/icon_arrow_right.png" class="arrow-icon">
        </div>

        <div class="slider-area">
            <div class="slider-title" style="text-align:left; padding-left:10px;">æœ€å¾Œã®ç€ã›æ›¿ãˆå±¥æ­´</div>
            <div class="slider-content" style="justify-content: flex-start;">
                <img src="assets/thumb_history.png" class="thumb-img">
            </div>
        </div>

        <div class="recommend-area">
            <div class="slider-title" style="text-align:left; padding-left:10px;">ã‚ªã‚¹ã‚¹ãƒ¡</div>
            <div class="item-grid">
                <div class="item-box"><img src="assets/item_top_4.png"></div>
                <div class="item-box"><img src="assets/item_top_5.png"></div>
                <div class="item-box"><img src="assets/item_top_6.png"></div>
                </div>
        </div>

        <div class="sns-area">
            <div class="sns-title">OfficialSNS</div>
            <div class="sns-icons">
                <img src="assets/icon_insta.png" class="sns-icon">
                <img src="assets/icon_x.png" class="sns-icon">
                <img src="assets/icon_line.png" class="sns-icon">
            </div>
            <div style="margin-top:10px; font-weight:bold;">Follow Us! â¤´</div>
        </div>

        <footer>
            <div class="footer-logo">WATASUTE</div>
            <div class="footer-links">
                <a href="#" class="footer-link">ãŠã™ã™ã‚</a>
                <a href="#" class="footer-link">Gallery</a>
                <a href="#" class="footer-link">ãƒ˜ãƒ«ãƒ—</a>
                <a href="#" class="footer-link">ã‚ˆãã‚ã‚‹è³ªå•</a>
                <a href="#" class="footer-link">ã‚¬ã‚¤ãƒ‰</a>
                <a href="#" class="footer-link">ãŠå•ã„åˆã‚ã›</a>
                <a href="#" class="footer-link">ãƒ¡ãƒ‡ã‚£ã‚¢é–¢é€£</a>
            </div>
            <img src="assets/banner_creator.png" class="banner-creator">
            <div style="margin-top:10px;">Â© WATASUTE</div>
        </footer>
    </div>


    <div id="maker-screen">
        <header>
            <img src="assets/logo.png" class="logo" style="width:120px;" alt="WATASUTE">
            <div style="position:absolute; right:20px; top:20px; font-weight:bold; color:#ff8fab; cursor:pointer;" onclick="goHome()">Ã— é–‰ã˜ã‚‹</div>
        </header>

        <div id="avatar-display">
            <img id="layer-background" class="avatar-layer" src="" alt="">
            <img id="layer-hair-back" class="avatar-layer" src="assets/hair1_back.png" alt="">
            <img id="layer-body"      class="avatar-layer" src="assets/body.png" alt="ç´ ä½“">
            <img id="layer-eyes"      class="avatar-layer" src="assets/eyes1.png" alt="">
            <img id="layer-mouth"     class="avatar-layer" src="assets/mouth1.png" alt="">
            <img id="layer-outfit"    class="avatar-layer" src="assets/outfit1.png" alt="">
            <img id="layer-hair-front"class="avatar-layer" src="assets/hair1_front.png" alt="">
            <img id="layer-accessory" class="avatar-layer" src="" alt="">
            <img id="layer-frame"     class="avatar-layer" src="" alt="">
        </div>

        <div class="action-buttons">
            <button class="btn-action" onclick="resetAvatar()">å…¨éƒ¨è„±ãŒã™</button>
            <button class="btn-action btn-save" onclick="downloadImage()">ä¿å­˜</button>
            <button class="btn-action">ã‚·ã‚§ã‚¢</button>
        </div>

        <div id="controls">
            <div class="tabs">
                <button class="tab-btn active" onclick="showTab('hair-front')">å‰é«ª</button>
                <button class="tab-btn" onclick="showTab('hair-back')">å¾Œé«ª</button>
                <button class="tab-btn" onclick="showTab('eyes')">ç›®</button>
                <button class="tab-btn" onclick="showTab('mouth')">å£</button>
                <button class="tab-btn" onclick="showTab('outfit')">æœ</button>
                <button class="tab-btn" onclick="showTab('accessory')">ã‚¢ã‚¯ã‚»</button>
            </div>

            <div id="tab-hair-front" class="item-list active">
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair1_front')">å‰é«ª1</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair2_front')">å‰é«ª2</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair3_front')">å‰é«ª3</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair4_front')">å‰é«ª4</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair5_front')">å‰é«ª5</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair6_front')">å‰é«ª6</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair7_front')">å‰é«ª7</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair8_front')">å‰é«ª8</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair9_front')">å‰é«ª9</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair10_front')">å‰é«ª10</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair11_front')">å‰é«ª11</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', 'hair12_front')">å‰é«ª12</button>
                <button class="item-btn" onclick="setPart('layer-hair-front', null)">ãªã—</button>
            </div>

            <div id="tab-hair-back" class="item-list">
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair1_back')">å¾Œé«ª1</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair2_back')">å¾Œé«ª2</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair3_back')">å¾Œé«ª3</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair4_back')">å¾Œé«ª4</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair5_back')">å¾Œé«ª5</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair6_back')">å¾Œé«ª6</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair7_back')">å¾Œé«ª7</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair8_back')">å¾Œé«ª8</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair9_back')">å¾Œé«ª9</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair10_back')">å¾Œé«ª10</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair11_back')">å¾Œé«ª11</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', 'hair12_back')">å¾Œé«ª12</button>
                <button class="item-btn" onclick="setPart('layer-hair-back', null)">ãªã—</button>
            </div>

            <div id="tab-eyes" class="item-list">
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes1')">ç›®1</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes2')">ç›®2</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes3')">ç›®3</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes4')">ç›®4</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes5')">ç›®5</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes6')">ç›®6</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes7')">ç›®7</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes8')">ç›®8</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes9')">ç›®9</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes10')">ç›®10</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes11')">ç›®11</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes12')">ç›®12</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes13')">ç›®13</button>
                <button class="item-btn" onclick="setPart('layer-eyes', 'eyes14')">ç›®14</button>
                <button class="item-btn" onclick="setPart('layer-eyes', null)">ãªã—</button>
            </div>

            <div id="tab-mouth" class="item-list">
                <button class="item-btn" onclick="setPart('layer-mouth', 'mouth1')">å£1</button>
                <button class="item-btn" onclick="setPart('layer-mouth', 'mouth2')">å£2</button>
                <button class="item-btn" onclick="setPart('layer-mouth', 'mouth3')">å£3</button>
                <button class="item-btn" onclick="setPart('layer-mouth', 'mouth4')">å£4</button>
                <button class="item-btn" onclick="setPart('layer-mouth', 'mouth5')">å£5</button>
                <button class="item-btn" onclick="setPart('layer-mouth', 'mouth6')">å£6</button>
                <button class="item-btn" onclick="setPart('layer-mouth', null)">ãªã—</button>
            </div>

            <div id="tab-outfit" class="item-list">
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit1')">æœ1</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit2')">æœ2</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit3')">æœ3</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit4')">æœ4</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit5')">æœ5</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit6')">æœ6</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit7')">æœ7</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit8')">æœ8</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit9')">æœ9</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit10')">æœ10</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit11')">æœ11</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit12')">æœ12</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit13')">æœ13</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit14')">æœ14</button>
                <button class="item-btn" onclick="setPart('layer-outfit', 'outfit15')">æœ15</button>
                <button class="item-btn" onclick="setPart('layer-outfit', null)">è„±ã</button>
            </div>

            <div id="tab-accessory" class="item-list">
                <button class="item-btn" onclick="setPart('layer-accessory', 'accessory1')">ã‚¢ã‚¯ã‚»1</button>
                <button class="item-btn" onclick="setPart('layer-accessory', 'accessory2')">ã‚¢ã‚¯ã‚»2</button>
                <button class="item-btn" onclick="setPart('layer-accessory', 'accessory3')">ã‚¢ã‚¯ã‚»3</button>
                <button class="item-btn" onclick="setPart('layer-accessory', null)">ãªã—</button>
            </div>
        </div>
    </div>

</div>

<script>
    // --- ç”»é¢åˆ‡ã‚Šæ›¿ãˆ ---
    function goToMaker() {
        document.getElementById('home-screen').style.display = 'none';
        document.getElementById('maker-screen').style.display = 'flex';
        window.scrollTo(0,0);
    }
    function goHome() {
        document.getElementById('maker-screen').style.display = 'none';
        document.getElementById('home-screen').style.display = 'block';
        window.scrollTo(0,0);
    }

    // --- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ ---
    function showTab(tabName) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.item-list').forEach(list => list.classList.remove('active'));
        event.target.classList.add('active');
        document.getElementById('tab-' + tabName).classList.add('active');
    }

    // --- ç€ã›æ›¿ãˆå®Ÿè¡Œ ---
    function setPart(layerId, imageName) {
        const layer = document.getElementById(layerId);
        if (imageName) {
            layer.src = `assets/${imageName}.png`;
            layer.style.display = 'block';
        } else {
            layer.src = '';
            layer.style.display = 'none';
        }
    }

    // --- å…¨éƒ¨è„±ãŒã™ ---
    function resetAvatar() {
        // ç´ ä½“ä»¥å¤–ã‚’éè¡¨ç¤ºã«ã™ã‚‹
        const layers = document.querySelectorAll('.avatar-layer');
        layers.forEach(img => {
            if (img.id !== 'layer-body') {
                img.style.display = 'none';
                img.src = '';
            }
        });
    }

    // --- ä¿å­˜æ©Ÿèƒ½ ---
    function downloadImage() {
        try {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            const bodyImg = document.getElementById('layer-body');
            if (!bodyImg || bodyImg.naturalWidth === 0) {
                canvas.width = 1000; canvas.height = 1500;
            } else {
                canvas.width = bodyImg.naturalWidth;
                canvas.height = bodyImg.naturalHeight;
            }

            const layerIds = [
                'layer-background', 'layer-hair-back', 'layer-body', 'layer-eyes',
                'layer-mouth', 'layer-outfit', 'layer-hair-front', 'layer-accessory', 'layer-frame'
            ];

            let itemsDrawn = 0;
            layerIds.forEach(id => {
                const img = document.getElementById(id);
                if (img && img.style.display !== 'none' && img.src && img.naturalWidth > 0) {
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    itemsDrawn++;
                }
            });

            if (itemsDrawn === 0) {
                alert("ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã›ã‚“");
                return;
            }

            const link = document.createElement('a');
            link.download = 'watasute_avatar.png';
            link.href = canvas.toDataURL('image/png');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

        } catch (e) {
            alert("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: " + e.message);
        }
    }
</script>

</body>
</html>
