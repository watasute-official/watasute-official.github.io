<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>わたすて - WATASUTE</title>
  <meta
    name="description"
    content="わたすて（WATASUTE）は、服や髪型、アクセサリーを自由に着せ替えて遊べるデジタルアバターサービスです。クリエイター向けのアイテム登録も準備中。"
  />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <!-- ========== HOME 画面 ========== -->
    <div id="home-screen">
      <header>
        <button
          class="hamburger-menu"
          type="button"
          aria-label="メニューを開く"
          aria-expanded="false"
          onclick="toggleMenu()"
        >
          <span></span><span></span><span></span>
        </button>

        <img src="assets/logo.png" class="logo" alt="WATASUTE ロゴ" />

        <nav id="drawer-menu" class="drawer-menu" aria-hidden="true">
          <a href="#start-area">自分の着せ替え</a>
          <a href="#recommend">おすすめアイテム</a>
          <a href="#sns">公式SNS</a>
          <a href="#footer">お問い合わせ</a>
        </nav>
      </header>

      <img src="assets/main_visual.png" class="main-visual" alt="わたすて メインビジュアル" />

      <div class="app-inner">
        <div class="header-buttons">
          <img src="assets/btn_Q.png" class="header-btn" alt="わたすてとは" />
          <img src="assets/btn_Howto.png" class="header-btn" alt="遊び方 How to" />
        </div>

        <div class="news-ticker" aria-label="お知らせ">
          <div class="news-content">
            🎉 わたすてプレオープン！ クリエイター募集中！ 新着アイテム続々追加予定！
          </div>
        </div>

        <section id="start-area" class="start-area">
          <div class="start-title">自分の着せ替え</div>
          <img
            src="assets/btn_start.png"
            class="btn-start"
            alt="今すぐ作る"
            onclick="goToMaker()"
          />
        </section>

        <section class="card">
          <h2 class="card-title center">本日のおすすめコーデ</h2>
          <div class="slider-content">
            <img src="assets/thumb_rec_1.png" class="thumb-img" alt="おすすめコーデ1" />
            <img src="assets/thumb_rec_2.png" class="thumb-img" alt="おすすめコーデ2" />
            <img src="assets/thumb_rec_3.png" class="thumb-img" alt="おすすめコーデ3" />
          </div>
        </section>

        <section class="card">
          <h2 class="card-title">最後の着せ替え履歴</h2>
          <div class="slider-content">
            <img src="assets/thumb_history.png" class="thumb-img" alt="最後の着せ替え" />
          </div>
        </section>

        <section id="recommend" class="card">
          <h2 class="card-title">オススメ</h2>
          <div class="item-grid">
            <div class="item-box"><img src="assets/item_top_4.png" alt="おすすめアイテム1" /></div>
            <div class="item-box"><img src="assets/item_top_5.png" alt="おすすめアイテム2" /></div>
            <div class="item-box"><img src="assets/item_top_6.png" alt="おすすめアイテム3" /></div>
          </div>
        </section>

        <section id="sns" class="sns-area">
          <div class="sns-title">OfficialSNS</div>
          <div class="sns-icons">
            <img src="assets/icon_insta.png" class="sns-icon" alt="Instagram" />
            <img src="assets/icon_x.png" class="sns-icon" alt="X（旧Twitter）" />
            <img src="assets/icon_line.png" class="sns-icon" alt="LINE公式" />
          </div>
          <div style="margin-top: 10px; font-weight: bold">Follow Us! ⤴</div>
        </section>
      </div>

      <footer id="footer">
        <div class="footer-logo">WATASUTE</div>
        <div class="footer-links">
          <a href="#" class="footer-link">おすすめ</a>
          <a href="#" class="footer-link">gallery</a>
          <a href="#" class="footer-link">ヘルプ</a>
          <a href="#" class="footer-link">よくある質問</a>
          <a href="#" class="footer-link">ガイド</a>
          <a href="#" class="footer-link">お問い合わせ</a>
          <a href="#" class="footer-link">メディア関連</a>
        </div>
        <img src="assets/banner_creator.png" class="banner-creator" alt="クリエイターさん募集中バナー" />
        <div style="margin-top: 6px">© WATASUTE</div>
      </footer>
    </div>

    <!-- ========== 着せ替え画面 ========== -->
    <div id="maker-screen">
      <header class="maker-header">
        <button type="button" class="maker-header-btn" onclick="goHome()">← マイページ</button>
        <div class="maker-title">自分の着せ替え</div>
        <button type="button" class="maker-header-btn">所持アイテム</button>
      </header>

      <div class="maker-main-top">
        <div class="avatar-wrapper">
          <div id="avatar-display">
            <video id="camera" autoplay playsinline muted></video>

            <div id="avatar-group">
              <img id="layer-background" class="avatar-layer" src="" alt="" />
              <img id="layer-hair-back" class="avatar-layer" src="assets/hair1_back.png" alt="" />
              <img id="layer-body" class="avatar-layer" src="assets/body.png" alt="素体" />
              <img id="layer-eyes" class="avatar-layer" src="assets/eyes1.png" alt="" />
              <img id="layer-mouth" class="avatar-layer" src="assets/mouth1.png" alt="" />
              <img id="layer-outfit" class="avatar-layer" src="assets/outfit1.png" alt="" />
              <img id="layer-hair-front" class="avatar-layer" src="assets/hair1_front.png" alt="" />
              <img id="layer-accessory" class="avatar-layer" src="" alt="" />
              <img id="layer-frame" class="avatar-layer" src="" alt="" />
            </div>
          </div>
        </div>

        <button class="btn-trash" type="button" onclick="resetAvatar()">全部脱がす</button>
      </div>

      <div class="maker-actions">
        <button class="btn-big btn-share-main" type="button" onclick="downloadImage()">♡ 保存</button>
        <button class="btn-big btn-share-main" type="button" id="btn-shoot-toggle" onclick="toggleShootMode()">📷 撮影モード</button>
        <button class="btn-big btn-share-main" type="button" onclick="startCamera()">カメラON</button>
        <button class="btn-big btn-share-main" type="button" onclick="switchCamera()">🔄 切替</button>
        <button class="btn-big btn-save-main" type="button" onclick="captureAndShare()">📸 撮影して保存</button>
        <button class="btn-big btn-share-main" type="button" id="btn-hide-ui" onclick="toggleHideUI()" style="display:none">👁 UI非表示</button>
      </div>
      <!-- 撮影して保存ボタン：ui-hidden時も常に表示される固定ボタン -->
      <button id="btn-capture-fixed" type="button" onclick="captureAndShare()">📸</button>

      <!-- UI全非表示モード中の復帰ボタン（常にDOM上に存在） -->
      <button id="btn-show-ui" type="button" onclick="toggleHideUI()" aria-label="UIを表示">👁</button>

      <!-- FIX 2: アイテムパネル開閉トグルバー -->
      <button id="panel-toggle-bar" type="button" onclick="toggleControls()" aria-label="アイテムパネルを開閉">
        <div class="toggle-knob"></div>
        <span id="panel-toggle-label">🧩 アイテムを選ぶ ▲</span>
      </button>

      <div id="controls">
        <div class="tabs">
          <button class="tab-btn active" type="button" onclick="showTab(this, 'hair-front')">前髪</button>
          <button class="tab-btn" type="button" onclick="showTab(this, 'hair-back')">後髪</button>
          <button class="tab-btn" type="button" onclick="showTab(this, 'eyes')">目</button>
          <button class="tab-btn" type="button" onclick="showTab(this, 'mouth')">口</button>
          <button class="tab-btn" type="button" onclick="showTab(this, 'outfit')">服</button>
          <button class="tab-btn" type="button" onclick="showTab(this, 'accessory')">アクセ</button>
        </div>

        <!-- 前髪 -->
        <div id="tab-hair-front" class="item-list active">
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair1_front')">前髪1</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair2_front')">前髪2</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair3_front')">前髪3</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair4_front')">前髪4</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair5_front')">前髪5</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair6_front')">前髪6</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair7_front')">前髪7</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair8_front')">前髪8</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair9_front')">前髪9</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair10_front')">前髪10</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair11_front')">前髪11</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', 'hair12_front')">前髪12</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-front', null)">なし</button>
        </div>

        <!-- 後髪 -->
        <div id="tab-hair-back" class="item-list">
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair1_back')">後髪1</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair2_back')">後髪2</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair3_back')">後髪3</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair4_back')">後髪4</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair5_back')">後髪5</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair6_back')">後髪6</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair7_back')">後髪7</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair8_back')">後髪8</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair9_back')">後髪9</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair10_back')">後髪10</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair11_back')">後髪11</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', 'hair12_back')">後髪12</button>
          <button class="item-btn" type="button" onclick="setPart('layer-hair-back', null)">なし</button>
        </div>

        <!-- 目 -->
        <div id="tab-eyes" class="item-list">
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes1')">目1</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes2')">目2</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes3')">目3</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes4')">目4</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes5')">目5</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes6')">目6</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes7')">目7</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes8')">目8</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes9')">目9</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes10')">目10</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes11')">目11</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes12')">目12</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes13')">目13</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', 'eyes14')">目14</button>
          <button class="item-btn" type="button" onclick="setPart('layer-eyes', null)">なし</button>
        </div>

        <!-- 口 -->
        <div id="tab-mouth" class="item-list">
          <button class="item-btn" type="button" onclick="setPart('layer-mouth', 'mouth1')">口1</button>
          <button class="item-btn" type="button" onclick="setPart('layer-mouth', 'mouth2')">口2</button>
          <button class="item-btn" type="button" onclick="setPart('layer-mouth', 'mouth3')">口3</button>
          <button class="item-btn" type="button" onclick="setPart('layer-mouth', 'mouth4')">口4</button>
          <button class="item-btn" type="button" onclick="setPart('layer-mouth', 'mouth5')">口5</button>
          <button class="item-btn" type="button" onclick="setPart('layer-mouth', 'mouth6')">口6</button>
          <button class="item-btn" type="button" onclick="setPart('layer-mouth', null)">なし</button>
        </div>

        <!-- 服 -->
        <div id="tab-outfit" class="item-list">
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit1')">服1</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit2')">服2</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit3')">服3</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit4')">服4</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit5')">服5</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit6')">服6</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit7')">服7</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit8')">服8</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit9')">服9</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit10')">服10</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit11')">服11</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit12')">服12</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit13')">服13</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit14')">服14</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', 'outfit15')">服15</button>
          <button class="item-btn" type="button" onclick="setPart('layer-outfit', null)">脱ぐ</button>
        </div>

        <!-- アクセサリ -->
        <div id="tab-accessory" class="item-list">
          <button class="item-btn" type="button" onclick="setPart('layer-accessory', 'accessory1')">アクセ1</button>
          <button class="item-btn" type="button" onclick="setPart('layer-accessory', 'accessory2')">アクセ2</button>
          <button class="item-btn" type="button" onclick="setPart('layer-accessory', 'accessory3')">アクセ3</button>
          <button class="item-btn" type="button" onclick="setPart('layer-accessory', null)">なし</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js" defer></script>
</body>
</html>
